.card.card-body
  %dl.row
    %dt.col-sm-3.text-right Host Application name
    %dd.col-sm-9= main_app_name
    %dt.col-sm-3.text-right Filename
    %dd.col-sm-9= @spreadsheet.name.blank? ? "no name supplied" : @spreadsheet.name

    %dt.col-sm-3.text-right Status
    %dd.col-sm-9= @spreadsheet.aasm_state
    %dt.col-sm-3.text-right Headers
    %dd.col-sm-9
      .text-info
        = @spreadsheet.originable_headers.join(" | ")
    %dt.col-sm-3.text-right
    %dd.col-sm-9

  .row
    .col
      .card.card-body
        = form_with url: spreadsheet_legends_path(@spreadsheet) do |f|
          = f.fields_for :legend do |f|
            .form-group
              = f.label "targetable model"
              = f.select("targetable_model", Buttafly::Targetable.models, {}, class: "form-control", id: "targetableModel")
            .form-group
              = f.submit "begin new legend", class: "btn btn-primary btn-block"
    .col
      .card.card-body
        = form_with url: spreadsheet_legends_path(@spreadsheet) do |f|
          = f.fields_for :legend do |f|
            .form-group
              = f.label "existing legends"
              = f.select("legend", Buttafly::Legend.pluck(:targetable_model), {}, class: "form-control", id: "legend")
            .form-group
              = f.submit "choose legend", class: "btn btn-primary btn-block"
.card.card-body
